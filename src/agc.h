#ifndef AGC_H
#define AGC_H

#define MIN_AGC 110u
#define MAX_AGC 255u

namespace AGC
{
  static const uint8_t agc_tab[2048] =
  {
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    0u,
    1u,
    1u,
    1u,
    1u,
    1u,
    2u,
    2u,
    2u,
    2u,
    2u,
    3u,
    3u,
    3u,
    3u,
    3u,
    3u,
    4u,
    4u,
    4u,
    4u,
    4u,
    5u,
    5u,
    5u,
    5u,
    5u,
    6u,
    6u,
    6u,
    6u,
    6u,
    6u,
    7u,
    7u,
    7u,
    7u,
    7u,
    8u,
    8u,
    8u,
    8u,
    8u,
    9u,
    9u,
    9u,
    9u,
    9u,
    9u,
    10u,
    10u,
    10u,
    10u,
    10u,
    11u,
    11u,
    11u,
    11u,
    11u,
    12u,
    12u,
    12u,
    12u,
    12u,
    12u,
    13u,
    13u,
    13u,
    13u,
    13u,
    14u,
    14u,
    14u,
    14u,
    14u,
    15u,
    15u,
    15u,
    15u,
    15u,
    15u,
    16u,
    16u,
    16u,
    16u,
    16u,
    17u,
    17u,
    17u,
    17u,
    17u,
    18u,
    18u,
    18u,
    18u,
    18u,
    18u,
    19u,
    19u,
    19u,
    19u,
    19u,
    20u,
    20u,
    20u,
    20u,
    20u,
    21u,
    21u,
    21u,
    21u,
    21u,
    21u,
    22u,
    22u,
    22u,
    22u,
    22u,
    23u,
    23u,
    23u,
    23u,
    23u,
    23u,
    24u,
    24u,
    24u,
    24u,
    24u,
    24u,
    24u,
    24u,
    24u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    25u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    26u,
    27u,
    27u,
    27u,
    27u,
    27u,
    27u,
    27u,
    27u,
    27u,
    27u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    28u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    29u,
    30u,
    30u,
    30u,
    30u,
    30u,
    30u,
    30u,
    30u,
    30u,
    30u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    31u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    32u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    33u,
    34u,
    34u,
    34u,
    34u,
    34u,
    34u,
    34u,
    34u,
    34u,
    34u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    35u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    36u,
    37u,
    37u,
    37u,
    37u,
    37u,
    37u,
    37u,
    37u,
    37u,
    37u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    38u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    39u,
    40u,
    40u,
    40u,
    40u,
    40u,
    40u,
    40u,
    40u,
    40u,
    40u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    41u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    42u,
    43u,
    43u,
    43u,
    43u,
    43u,
    43u,
    43u,
    43u,
    43u,
    43u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    44u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    45u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    46u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    47u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    48u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    49u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    50u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    51u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    52u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    53u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    54u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    55u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    56u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    57u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    58u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    59u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    60u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    61u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    62u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    63u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    64u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    65u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    66u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    67u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    68u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    69u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    70u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    71u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    72u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    73u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    74u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    75u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    76u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    77u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    78u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    79u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    80u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    81u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    82u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    83u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    84u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    85u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    86u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    87u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    88u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    89u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    90u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    91u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    92u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    93u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    94u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    95u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    96u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    97u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    98u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    99u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    100u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u,
    101u
  };

  static const int16_t dc(const int16_t in)
  {
    static int32_t s = 0;
    static int32_t x1 = 0;
    static int16_t y1 = 0;
    s -= x1;
    x1 = (int32_t)in << 16;
    s += x1 - ((int32_t)y1 << 8);
    return (y1 = s >> 16);
  }

  static const uint32_t peak(const int16_t sig)
  {
    volatile static uint32_t p = 0;
    const int32_t agc_dc = (int32_t)dc(sig);
    const uint32_t level = ((uint32_t)abs(agc_dc))<<9;
    if (level>p)
    {
      p = level;
    }
    else
    {
      if (p) p--;
    }
    return p>>9;
  }

  static const uint8_t attenuation(const uint32_t peak)
  {
    // given the signal peak value,
    // return the appropriate attenuation to
    // be subtracted from the volume PWM level
    // watch out for the abs(-2048) edge case!
    return agc_tab[min(peak,2047u)];
  }
}
#endif
